<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Passport Power Calculator</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; color:#333; margin:0; padding:0; }
    header { background:#e0e0e0; border-bottom:1px solid #aaa; padding:12px 20px; text-align:center; }
    header h1 { margin:0; font-size:1.4em; font-weight:normal; }

    .container {
      display:grid;
      grid-template-columns: 360px 5px 1fr; /* LEFT | V DIV | RIGHT  */
      grid-template-rows: 220px 5px 1fr;    /* NOTES | H DIV | RESULTS */
      height: calc(100vh - 50px);
    }

    .countries {
      grid-column:1; grid-row:1 / span 3;
      border-right:1px solid #aaa; padding:10px; overflow-y:auto; background:#eee;
      display:flex; flex-direction:column;
    }
    .notes {
      grid-column:3; grid-row:1;
      padding:10px; background:#fafafa; border-bottom:1px solid #ddd; box-shadow: inset 0 1px 0 #fff;
    }

    /* ADD: small circular flag/avatar beside country name */
.flag {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  margin-right: 8px;
  vertical-align: -3px;
  object-fit: cover;
  border: 1px solid #aaa;
  background: #fff;
}
.country-button input { margin-right: 6px; } /* keep as-is, works with the flag */

    .results {
      grid-column:3; grid-row:3;
      padding:10px; overflow-y:auto; background:#fff; border-top:1px solid #eee;
    }

    h2 { font-size:1.1em; margin-top:0; border-bottom:1px solid #ccc; padding-bottom:5px; }

    .search-box { margin-bottom:10px; }
    .search-box input {
      width:100%; padding:8px; border:1px solid #aaa; border-radius:4px; font-size:0.9em;
      background:#fafafa; box-sizing:border-box;
    }

    .country-list { list-style:none; padding:0; margin:0; flex-grow:1; }
    .country-list li { margin-bottom:8px; }
    .country-button {
      display:block; width:100%; background:#ddd; border:1px solid #aaa; border-radius:6px;
      padding:8px; text-align:left; cursor:pointer; font-size:0.95em; transition:background .2s, transform .1s;
      box-sizing:border-box;
    }
    .country-button:hover { background:#ccc; }
    .country-button:active { transform:scale(0.98); }
    .country-button input { margin-right:6px; }
    .disabled { color:#999; pointer-events:none; opacity:.6; }

    .drag-bar { background:#ccc; user-select:none; transition:background .15s; }
    .drag-bar:hover { background:#bdbdbd; }
    #drag-bar-x { grid-column:2; grid-row:1 / span 3; cursor:col-resize; width:5px; }
    #drag-bar-y { grid-column:3; grid-row:2; cursor:row-resize; height:5px;
      background-image: linear-gradient(to right, transparent 0, rgba(0,0,0,0.07) 50%, transparent 100%);
    }

    .pill { display:inline-block; padding:2px 6px; border:1px solid #bbb; border-radius:12px; background:#eee; margin:2px 4px 0 0; font-size:.85em; }
    .muted { color:#555; }
    .list-grid { columns: 2 280px; column-gap: 20px; }
    .list-grid li { break-inside: avoid; }

    * { scrollbar-width:thin; scrollbar-color:#bbb #eee; }
    *::-webkit-scrollbar { width:10px; height:10px; }
    *::-webkit-scrollbar-thumb { background:#bbb; border:2px solid #eee; border-radius:8px; }
    *::-webkit-scrollbar-track { background:#eee; }
  </style>
</head>
<body>
  <header>
    <h1>Passport Calculator</h1>
  </header>

  <div class="container" id="grid">
    <!-- LEFT: Countries -->
    <div class="countries">
      <h2>Countries</h2>
      <div class="search-box">
        <input type="text" id="search" placeholder="Search countries..." aria-label="Search countries">
      </div>
      <ul class="country-list" id="country-list"><!-- rendered dynamically --></ul>
    </div>

    <!-- Vertical drag -->
    <div class="drag-bar" id="drag-bar-x" role="separator" aria-orientation="vertical" tabindex="0" title="Drag to resize columns"></div>

    <!-- Top Right: Notes -->
    <div class="notes">
      <h2>Notes</h2>
      <div id="notes-content" class="muted">
        Select one or more passports on the left to see rules and travel privileges.
      </div>
    </div>

    <!-- Horizontal drag -->
    <div class="drag-bar" id="drag-bar-y" role="separator" aria-orientation="horizontal" tabindex="0" title="Drag to resize rows"></div>

    <!-- Bottom Right: Results -->
    <div class="results">
      <h2>Visa-Free Access</h2>
      <div id="summary"><b>0</b> countries available.</div>
      <div id="selected" class="muted" style="margin:6px 0 10px 0;"></div>
      <ul id="destinations" class="list-grid"><!-- destinations --></ul>
    </div>
  </div>

  <script>
  (function() {
    /* ===================== DATA LAYER ===================== */
    const PASSPORTS = new Map(); // code -> object
    const ORDER = [];            // preserve insertion order

    /* ADD (above addCountry): code â†’ display name registry for destinations not in PASSPORTS */
const CODE_TO_NAME = {}; // e.g. CODE_TO_NAME['GB'] = 'United Kingdom'
function registerName(code, name) {
  if (!code) return;
  CODE_TO_NAME[code.toUpperCase()] = name || code.toUpperCase();
}

/* REPLACE: addCountry now accepts visaFree as codes, plus optional alpha2/flag */
function addCountry({
  code,            // primary code for this passport (e.g., 'USA' or 'GB')
  name,            // display name ('United States')
  alpha2 = null,   // optional alpha-2 for flag files (e.g., 'US', 'GB')
  flag = null,     // optional explicit flag URL; if omitted and alpha2 exists: /flags/{alpha2}.png
  visaFree = [],   // ARRAY OF CODES NOW (e.g., ['CA','MX','GB','FR'])
  incompatibleWith = [],
  allowedWith = [], // ARRAY OF CODES (passport codes)
  maxCitizenships = Infinity,
  notes = ''
}) {
  const c = (code || '').trim().toUpperCase();
  if (!c || !name) return;

  const a2 = alpha2 ? alpha2.trim().toUpperCase() : null;
  const flagUrl = flag || (a2 ? `/flags/${a2.toLowerCase()}.png` : null);

  PASSPORTS.set(c, {
    code: c,
    name,
    alpha2: a2,
    flag: flagUrl,
    // store visa-free as uppercased codes for speed/consistency
    visaFree: new Set((visaFree || []).map(x => (x || '').toUpperCase())),
    incompatibleWith: new Set((incompatibleWith || []).map(x => (x || '').toUpperCase())),
    allowedWith: new Set((allowedWith || []).map(x => (x || '').toUpperCase())),
    maxCitizenships: (Number.isFinite(maxCitizenships) ? maxCitizenships : Infinity),
    notes
  });
  ORDER.push(c);

  // Register this passport's own display name under BOTH its main code and alpha2 (if provided)
  registerName(c, name);
  if (a2) registerName(a2, name);
}

    // Symmetrize incompatibilities only (no DOM access here)
    function finalizeCountries() {
      for (const [code, obj] of PASSPORTS) {
        for (const other of obj.incompatibleWith) {
          const o = PASSPORTS.get(other);
          if (o) o.incompatibleWith.add(code);
        }
      }
    }

    /* ===== Sample entries (replace with your real lists) ===== */
    addCountry({
  code: 'AF',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Afghanistan',   // Display name
  alpha2: 'AF',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree: [              // List of destination codes this passport allows visa-free access to
   'AF','BD','BI','KH','CV','KM','CK','DJ','DM','GW','HT','KE','MO','MG','MV','FM','MZ','NU','PW','RW','WS','SC','SO','LK','TL','TV'
  ],
  incompatibleWith: [      // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'AL',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Albania',   // Display name
  alpha2: 'AL',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree: [              // List of destination codes this passport allows visa-free access to
   'AL','AD','AG','AM','AW','AT','AZ','BD','BB','BY','BE','BO','BQ','BA','BR','BG','BI','KH','CV','CL','CN','CO','KM','CK','HR','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','EE','FO','FI','FR','GF','PF','GP','GE','DE','GR','GL','GW','GY','HT','HK','HU','IS','ID','IR','IL','IT','JM','JO','KZ','KE','XK','KG','LA','LV','LI','LT','LU','MO','MG','MW','MY','MV','MT','MU','YT','FM','MD','MC','MZ','NP','NL','NC','NU','MK','NO','PW','PS','PL','PT','RE','RO','RW','WS','SM','SA','RS','SC','SG','SK','SI','SO','KR','ES','LK','KN','SX','VC','SR','SE','CH','TW','TZ','TH','GM','TL','TT','TR','TV','UA','AE','ZM','ZW','VA'
  ],
  incompatibleWith: [      // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'DZ',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Algeria',   // Display name
  alpha2: 'DZ',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree: [              // List of destination codes this passport allows visa-free access to
  'AO','BB','BJ','DZ','BO','BI','KH','CV','CK','KM','DJ','DM','EC','ET','GH','GN','GW','HK','HT','IR','JO','KE','LB','LY','MO','MG','MY','MV','ML','MH','MR','MU','FM','MA','MZ','NP','NI','NU','PW','RW','WS','SN','SC','SO','LK','VC','SR','SY','TJ','TZ','GM','TL','TN','TV','YE','ZW'
],
  incompatibleWith: [      // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'HR',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Croatia',   // Display name
  alpha2: 'HR',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree: [              // List of destination codes this passport allows visa-free access to
  'AL','AS','AD','AO','AI','AG','AR','AM','AW','AT','BS','BH','BD','BB','BY','BE','BZ','BM','BO','BQ','BA','BW','BR','VG','BN','BG','BI','KH','CA','CV','KY','CL','CN','CO','KM','CK','CR','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','EE','SZ','ET','FK','FO','FJ','FI','FR','GF','PF','GP','GE','DE','GI','GR','GL','GD','GU','GT','GW','HT','HN','HK','HU','IS','ID','IR','IQ','IE','IL','IT','JM','JP','JO','KZ','KE','KI','XK','KW','KG','LA','LV','LB','LI','LT','LU','MO','MG','MW','MY','MV','MT','MH','MU','YT','MX','FM','MD','MC','MN','ME','MA','MZ','MM','NA','NP','NL','NC','NZ','NI','NU','MK','MP','NO','OM','PW','PS','PA','PY','PE','PH','PL','PT','PR','QA','RE','RO','RW','WS','SM','ST','SA','SN','RS','SC','SL','SG','SK','SI','SB','SO','KR','ES','LK','SH','KN','LC','MF','VC','SR','SE','CH','TW','TJ','TZ','TH','GM','TL','TO','TT','TN','TR','TC','TV','UA','AE','GB','US','UY','VI','UZ','VU','VA','VE','ZM','ZW','HR'
],
  incompatibleWith: [      // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'IE',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Ireland',   // Display name
  alpha2: 'IE',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree: [ 'GP',  'AL','AS','AD','AO','AI','AG','AR','AM','AW','AU','AT','BS','BH','BD','BB','BY','BE','BZ','BM','BO','BQ','BA','BW','BR','VG','BN','BG','BI','KH','CA','CV','KY','CL','CN','CO','KM','CK','CR','HR','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','EE','SZ','ET','FK','FO','FJ','FI','FR','GF','PF','GE','DE','GI','GR','GL','GD','GU','GT','GW','GY','HT','HN','HK','HU','IS','ID','IR','IQ','IL','IT','JM','JP','JO','KZ','KE','KI','XK','KW','KG','LA','LV','LB','LS','LI','LT','LU','MO','MG','MW','MY','MV','MT','MH','MU','YT','MX','FM','MD','MC','MN','ME','MS','MA','MZ','MM','NA','NP','NL','NC','NZ','NI','NU','MK','MP','NO','OM','PW','PS','PA','PY','PE','PH','PL','PT','PR','QA','RE','RO','RW','WS','SM','ST','SA','SN','RS','SC','SL','SG','SK','SI','SB','SO','ZA','KR','ES','LK','SH','KN','LC','MF','VC','SR','SE','CH','TW','TJ','TZ','TH','GM','TL','TO','TT','TN','TR','TC','TV','UG','UA','AE','GB','US','UY','VI','UZ','VU','VA','VE','ZM','ZW','IE'           // List of destination codes this passport allows visa-free access to
  ],
  incompatibleWith: [      // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'LB',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Lebanon',   // Display name
  alpha2: 'LB',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree: [ 'LB', 'AM','BB','BO','BI','KH','CV','KM','CK','DJ','DM','EC','ET','GE','GW','HT','IR','IQ','JO','KE','LA','MO','MG','MY','MV','MH','MU','FM','MZ','NP','NU','OM','PW','QA','RW','WS','SC','SO','LK','SR','SY','TJ','TL','TR','TV'   ],
  incompatibleWith: [ 'IL'     // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'CN',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'China',   // Display name
  alpha2: 'CN',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree: [ 'CN', 'AL','AO','AG','AM','AZ','BS','BH','BD','BB','BY','BJ','BO','BA','VG','BN','BI','KH','CV','KM','CK','CU','DJ','DM','EG','ET','FJ','GE','GD','GN','GW','HT','ID','IR','IQ','JM','JO','KZ','KE','KI','LA','LB','MG','MW','MY','MV','MU','FM','MA','MZ','MM','NP','NU','MP','OM','PW','QA','RW','WS','ST','SA','SN','RS','SC','SL','SG','SB','SO','LK','KN','LC','SR','TZ','TH','TL','TO','TN','TC','TV','AE','UZ','VU','ZM','ZW'],
  incompatibleWith: [      // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: 1, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'US',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'United States',   // Display name
  alpha2: 'US',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree: ['AL','AS','AD','AO','AI','AG','AR','AM','AW','AU','AT','BS','BH','BD','BB','BE','BZ','BM','BO','BQ','BA','BW','VG','BN','BG','BI','KH','CA','CV','KY','CL','CO','KM','CK','CR','HR','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','EE','SZ','ET','FK','FO','FJ','FI','FR','GF','PF','GP','GE','DE','GI','GR','GL','GD','GU','GT','GW','GY','HT','HN','HK','HU','IS','ID','IQ','IE','IL','IT','JM','JP','JO','KZ','KE','KI','XK','KW','KG','LA','LV','LB','LS','LI','LT','LU','MO','MG','MW','MY','MV','MT','MH','MU','YT','MX','FM','MD','MC','MN','ME','MS','MA','MZ','MM','NA','NP','NL','NC','NZ','NI','NU','MK','MP','NO','OM','PW','PS','PA','PY','PE','PH','PL','PT','PR','QA','RE','RO','RW','WS','SM','ST','SA','SN','RS','SC','SL','SG','SK','SI','SB','SO','ZA','KR','ES','LK','SH','KN','LC','MF','VC','SR','SE','CH','TW','TJ','TZ','TH','GM','TL','TO','TT','TN','TR','TC','TV','UA','AE','GB','UY','VI','VU','VA','ZM','ZW','US' ],
  incompatibleWith: [      // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'FM',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Micronesia',   // Display name
  alpha2: 'FM',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree: ['FM','AS','AD','AO','AI','AT','BD','BB','BY','BE','BZ','BM','BO','BA','VG','BG','BI','KH','CV','CO','KM','CK','CR','HR','CY','CZ','DK','DJ','DM','DO','EC','EG','EE','FO','FJ','FI','FR','PF','DE','GI','GR','GL','GD','GU','GW','HT','HK','HU','IS','IR','IL','IT','JO','KE','KI','XK','LA','LV','LI','LT','LU','MO','MG','MW','MY','MV','MT','MH','MU','MX','MD','MC','ME','MS','MZ','NR','NP','NL','NC','NI','NU','MP','NO','PW','PS','PA','PG','PE','PH','PL','PT','PR','RO','RW','WS','SM','SN','SC','SG','SK','SI','SB','SO','KR','ES','LK','SH','LC','VC','SR','SE','CH','TZ','GM','TL','TO','TV','GB','US','VI','VU','VA','ZM','ZW'],
  incompatibleWith: [      // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'MA',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Morocco',   // Display name
  alpha2: 'MA',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree: ['MA','AO','AZ','BB','BZ','BJ','BO','BR','BI','KH','CV','CO','KM','CG','CK','CI','DJ','DM','DO','EC','ET','GA','GH','GD','GN','GW','HT','HK','ID','IR','JO','KZ','KE','KI','LA','LB','MO','MG','MY','MV','ML','MH','MU','FM','MZ','NP','NI','NE','NU','PW','PH','RW','WS','ST','SN','SC','SO','KR','LK','KN','VC','SR','SY','TJ','TZ','TH','GM','TL','TG','TN','TR','TV','VU','ZM'],
  incompatibleWith: [      // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'JP',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Japan',   // Display name
  alpha2: 'JP',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree: ['AL','AS','AD','AO','AI','AG','AR','AM','AW','AU','AT','AZ','BS','BH','BD','BB','BY','BE','BZ','BM','BO','BQ','BA','BW','BR','VG','BN','BG','BI','KH','CA','CV','KY','CL','CN','CO','KM','CK','CR','HR','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','EE','SZ','ET','FK','FO','FJ','FI','FR','GF','PF','GP','GE','DE','GI','GR','GL','GD','GU','GT','GW','GY','HT','HN','HK','HU','IS','IN','ID','IR','IQ','IE','IL','IT','JM','JO','KZ','KE','KI','XK','KW','KG','LA','LV','LB','LS','LI','LT','LU','MO','MG','MW','MY','MV','MT','MH','MU','YT','MX','FM','MD','MC','MN','ME','MS','MA','MZ','MM','NA','NP','NL','NC','NZ','NI','NU','MK','MP','NO','OM','PW','PS','PA','PY','PE','PH','PL','PT','PR','QA','RE','RO','RW','WS','SM','ST','SA','SN','RS','SC','SL','SG','SK','SI','SB','SO','ZA','KR','ES','LK','SH','KN','LC','MF','VC','SR','SE','CH','TW','TJ','TZ','TH','TL','TO','TT','TN','TR','TC','TV','UA','AE','GB','US','UY','VI','UZ','VU','VA','VE','VN','ZM','ZW','JP'],  incompatibleWith: [      // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: 1, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'KP',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'North Korea',   // Display name
  alpha2: 'KP',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree: ['KP','AM','BD','BI','KH','CV','KM','CK','DJ','DM','EG','ET','GW','GY','HT','IR','JO','KE','KG','LA','MO','MG','MW','MV','FM','MZ','MM','NP','NI','NU','PW','RW','WS','SC','SO','VC','SR','TZ','GM','TL','TV'],
  incompatibleWith: [      // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: 1, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'SR',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Suriname',   // Display name
  alpha2: 'SR',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['SR','AO','AG','AR','AW','BS','BH','BB','BZ','BO','BQ','BR','BI','KH','CV','CN','CO','KM','CK','CR','CW','DJ','DM','DO','EC','EG','GD','GW','GY','HT','HK','ID','IR','IL','JM','JP','JO','KE','KI','MO','MG','MW','MY','MV','MU','FM','MS','MZ','NP','NI','NU','OM','PW','PS','PE','PH','QA','RU','RW','WS','SN','RS','SC','SG','SO','KR','LK','KN','LC','MF','VC','TZ','GM','TL','TT','TC','TV','ZM','ZW'],
  incompatibleWith: [      // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: 1, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'BE',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Belgium',   // Display name
  alpha2: 'BE',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['BE','AL','AS','AD','AO','AI','AG','AR','AM','AW','AU','AT','BS','BH','BD','BB','BY','BZ','BM','BO','BQ','BA','BW','BR','VG','BN','BG','BI','KH','CA','CV','KY','CL','CN','CO','KM','CK','CR','HR','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','EE','SZ','ET','FK','FO','FJ','FI','FR','GF','PF','GP','GE','DE','GI','GR','GL','GD','GU','GT','GW','GY','HT','HN','HK','HU','IS','ID','IR','IQ','IE','IL','IT','JM','JP','JO','KZ','KE','KI','XK','KW','KG','LA','LV','LB','LS','LI','LT','LU','MO','MG','MW','MY','MV','MT','MH','MU','YT','MX','FM','MD','MC','MN','ME','MS','MA','MZ','MM','NA','NP','NL','NC','NZ','NI','NU','MK','MP','NO','OM','PW','PS','PA','PY','PE','PH','PL','PT','PR','QA','RE','RO','RW','WS','SM','ST','SA','SN','RS','SC','SL','SG','SK','SI','SB','SO','ZA','KR','ES','LK','SH','KN','LC','MF','VC','SR','SE','CH','TW','TJ','TZ','TH','GM','TL','TO','TT','TN','TR','TC','TV','UA','AE','GB','US','UY','VI','UZ','VU','VA','VE','ZM','ZW'],
  incompatibleWith: [      // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'SG',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Singapore',   // Display name
  alpha2: 'SG',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['SG','AL','AS','AD','AO','AI','AG','AR','AM','AW','AU','AT','AZ','BS','BH','BD','BB','BY','BE','BZ','BJ','BM','BO','BQ','BA','BW','BR','VG','BN','BG','BF','BI','KH','CA','CV','KY','CL','CN','CO','KM','CK','CR','CI','HR','CU','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','EE','SZ','ET','FO','FJ','FI','FR','GF','PF','GP','GA','GE','DE','GH','GI','GR','GL','GD','GU','GT','GN','GW','GY','HT','HN','HK','HU','IS','ID','IR','IE','IL','IT','JM','JP','JO','KZ','KE','KI','XK','KW','KG','LA','LV','LB','LS','LI','LT','LU','MO','MG','MW','MY','MV','MT','MH','MU','YT','MX','FM','MD','MC','MN','ME','MS','MA','MZ','MM','NA','NP','NL','NC','NZ','NI','NU','MK','MP','NO','OM','PW','PS','PA','PY','PE','PH','PL','PT','PR','QA','RE','RO','RW','WS','SM','SA','SN','RS','SC','SL','SK','SI','SB','SO','ZA','KR','ES','LK','SH','KN','LC','MF','VC','SR','SE','CH','TW','TJ','TZ','TH','GM','TL','TO','TT','TN','TR','TC','TV','UG','AE','GB','US','UY','VI','UZ','VU','VA','VN','ZM','ZW'],
    incompatibleWith: [      // List of other passport codes this cannot be combined with
    
  ],
  maxCitizenships: 1, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'AD',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Andorra',   // Display name
  alpha2: 'AD',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['AD','AL','AS','AI','AG','AR','AM','AW','AU','AT','BS','BH','BD','BB','BY','BE','BZ','BM','BO','BQ','BA','BR','VG','BG','BI','KH','CA','CV','KY','CL','CN','CO','KM','CK','CR','HR','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','EE','SZ','FK','FO','FI','FR','GF','PF','GP','GE','DE','GI','GR','GL','GU','GT','GW','HT','HN','HK','HU','IS','ID','IR','IE','IL','IT','JM','JP','JO','KZ','KE','XK','KW','KG','LA','LV','LB','LI','LT','LU','MO','MG','MW','MY','MV','MT','MH','MU','YT','MX','FM','MD','MC','ME','MS','MA','MZ','NP','NL','NC','NZ','NI','NU','MK','MP','NO','OM','PW','PS','PA','PY','PE','PH','PL','PT','PR','QA','RE','RO','RU','RW','WS','SM','ST','SA','SN','RS','SC','SG','SK','SI','SB','SO','ZA','KR','ES','LK','SH','LC','MF','VC','SR','SE','CH','TW','TJ','TZ','TH','GM','TL','TN','TR','TV','UA','AE','GB','US','UY','VI','UZ','VU','VA','VE','ZM','ZW'],   
   incompatibleWith: [      // List of other passport codes this cannot be combined with
  ],
  maxCitizenships: 1, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'AO',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Angola',   // Display name
  alpha2: 'AO',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['AO','BD','BB','BJ','BW','BI','KH','CV','KM','CK','DJ','DM','ET','GH','GW','HT','IR','KE','LA','MO','MG','MV','MU','FM','MZ','NA','NP','NI','NU','PW','PH','RW','WS','ST','SN','SC','SG','SO','ZA','LK','VC','TZ','GM','TL','TN','TV','UG','ZM','ZW'],   
   incompatibleWith: [      // List of other passport codes this cannot be combined with
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'AG',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Antigua and Barbuda',   // Display name
  alpha2: 'AG',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['AG','AL','AD','AO','AI','AM','AW','AT','BS','BD','BB','BY','BE','BZ','BM','BO','BQ','BA','BW','BR','VG','BG','BI','KH','CV','KY','CL','CN','CO','KM','CK','CR','HR','CU','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','EE','SZ','FO','FJ','FI','FR','GF','PF','GP','GE','DE','GI','GR','GL','GD','GT','GW','GY','HT','HN','HK','HU','IS','IR','IE','IT','JM','JO','KE','KI','XK','LA','LV','LB','LS','LI','LT','LU','MO','MG','MW','MY','MV','MT','MU','YT','FM','MD','MC','ME','MS','MZ','NP','NL','NC','NI','NU','MK','NO','PW','PA','PE','PH','PL','PT','QA','RE','RO','RU','RW','WS','SM','RS','SC','SL','SG','SK','SI','SB','SO','ZA','KR','ES','LK','SH','KN','LC','MF','VC','SR','SE','CH','TZ','GM','TL','TT','TN','TR','TC','TV','UG','UA','GB','UZ','VU','VA','VE','ZM','ZW'],
     incompatibleWith: [      // List of other passport codes this cannot be combined with
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'AR',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Argentina',   // Display name
  alpha2: 'AR',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['AR','AL','AD','AO','AI','AG','AM','AW','AT','BS','BH','BD','BB','BY','BE','BZ','BM','BO','BQ','BA','BW','BR','VG','BG','BI','KH','CV','KY','CL','CN','CO','KM','CK','CR','HR','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','EE','SZ','ET','FK','FO','FJ','FI','FR','GF','PF','GP','GE','DE','GI','GR','GL','GD','GT','GW','GY','HT','HN','HK','HU','IS','ID','IR','IE','IL','IT','JM','JP','JO','KZ','KE','KI','XK','KG','LA','LV','LB','LI','LT','LU','MO','MG','MW','MY','MV','MT','MH','MU','YT','MX','FM','MD','MC','MN','ME','MS','MA','MZ','NA','NP','NL','NC','NZ','NI','NU','MK','NO','OM','PW','PS','PA','PY','PE','PH','PL','PT','QA','RE','RO','RU','RW','WS','SM','SN','RS','SC','SG','SK','SI','SB','SO','ZA','KR','ES','LK','SH','KN','LC','MF','VC','SR','SE','CH','TJ','TZ','TH','TL','TT','TN','TR','TC','TV','UA','AE','GB','UY','UZ','VU','VA','VE','ZM','ZW'],
       incompatibleWith: [      // List of other passport codes this cannot be combined with
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'AM',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Armenia',   // Display name
  alpha2: 'AM',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['AM','AL','AG','AR','BS','BD','BB','BY','BO','BR','BI','KH','CV','CN','KM','CK','DJ','DM','EC','GE','GW','HT','HK','ID','IR','JM','JO','KZ','KE','KG','LA','LB','MO','MG','MW','MY','MV','MU','FM','MD','MZ','NA','NP','NU','PW','PA','RU','RW','WS','SN','RS','SC','SO','LK','VC','SR','TJ','TZ','TH','GM','TL','TR','TV','UA','AE','UY','UZ','ZW'],
         incompatibleWith: [      // List of other passport codes this cannot be combined with
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'AU',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Australia',   // Display name
  alpha2: 'AU',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['AU','AL','AS','AD','AO','AI','AG','AR','AM','AW','AT','BS','BH','BD','BB','BY','BE','BZ','BM','BO','BQ','BA','BW','VG','BN','BG','BI','KH','CA','CV','KY','CN','CO','KM','CK','CR','HR','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','EE','SZ','ET','FK','FO','FJ','FI','FR','GF','PF','GP','GE','DE','GI','GR','GL','GD','GU','GT','GW','GY','HT','HN','HK','HU','IS','ID','IR','IQ','IE','IL','IT','JM','JP','JO','KZ','KE','KI','XK','KW','KG','LA','LV','LB','LS','LI','LT','LU','MO','MG','MW','MY','MV','MT','MH','MU','YT','MX','FM','MD','MC','MN','ME','MS','MA','MZ','MM','NA','NP','NL','NC','NZ','NI','NU','MK','MP','NO','OM','PW','PS','PA','PY','PE','PH','PL','PT','PR','QA','RE','RO','RW','WS','SM','SA','SN','RS','SC','SL','SG','SK','SI','SB','SO','ZA','KR','ES','LK','SH','KN','LC','MF','VC','SR','SE','CH','TW','TJ','TZ','TH','GM','TL','TO','TT','TN','TR','TC','TV','UA','AE','GB','US','UY','VI','UZ','VU','VA','VE','ZM','ZW'],
         incompatibleWith: [      // List of other passport codes this cannot be combined with
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'AT',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Austria',   // Display name
  alpha2: 'AT',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['AT','AL','AS','AD','AO','AI','AG','AR','AM','AW','AU','BS','BH','BD','BB','BY','BE','BZ','BM','BO','BQ','BA','BW','BR','VG','BN','BG','BI','KH','CA','CV','KY','CL','CN','CO','KM','CK','CR','HR','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','EE','SZ','ET','FK','FO','FJ','FI','FR','GF','PF','GP','GE','DE','GI','GR','GL','GD','GU','GT','GW','GY','HT','HN','HK','HU','IS','ID','IR','IQ','IE','IL','IT','JM','JP','JO','KZ','KE','KI','XK','KW','KG','LA','LV','LB','LS','LI','LT','LU','MO','MG','MW','MY','MV','MT','MH','MU','YT','MX','FM','MD','MC','MN','ME','MS','MA','MZ','MM','NA','NP','NL','NC','NZ','NI','NU','MK','MP','NO','OM','PW','PS','PA','PY','PE','PH','PL','PT','PR','QA','RE','RO','RW','WS','SM','ST','SA','SN','RS','SC','SL','SG','SK','SI','SB','SO','ZA','KR','ES','LK','SH','KN','LC','MF','VC','SR','SE','CH','TW','TJ','TZ','TH','GM','TL','TO','TT','TN','TR','TC','TV','UA','AE','GB','US','UY','VI','UZ','VU','VA','VE','ZM','ZW'],
         incompatibleWith: [      // List of other passport codes this cannot be combined with
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'AZ',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Azerbaijan',   // Display name
  alpha2: 'AZ',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['AZ','AL','AG','BS','BD','BB','BY','BO','BA','BI','KH','CV','CN','CO','KM','CK','DJ','DM','EC','GE','GD','GW','HT','ID','IR','JM','JO','KZ','KE','KG','LA','LB','MO','MG','MW','MY','MV','MH','MU','FM','MD','ME','MA','MZ','NA','NP','NI','NU','PW','QA','RU','RW','WS','SA','RS','SC','SO','LK','VC','SR','SY','TJ','TZ','GM','TL','TR','TV','UA','AE','UZ','VU','ZW'],
         incompatibleWith: [      // List of other passport codes this cannot be combined with
  ],
  maxCitizenships: 1, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'BT',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Bhutan',   // Display name
  alpha2: 'BT',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['BT','BD','BB','BI','KH','CV','CO','KM','CK','DJ','DM','EC','EG','GW','HT','HK','IN','IR','JO','KE','KW','LA','LB','MO','MG','MW','MV','MU','FM','MZ','NP','NI','NU','PW','PA','PH','RW','WS','SC','SG','SO','LK','LC','VC','SR','TZ','TH','GM','TL','TV','ZM','ZW','BT'],
         incompatibleWith: [      // List of other passport codes this cannot be combined with
  ],
  maxCitizenships: 1, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'BA',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Bosnia and Herzegovina',   // Display name
  alpha2: 'BA',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['AL','AD','AR','AM','AW','AT','BD','BY','BE','BO','BQ','BR','BG','BI','KH','CV','CL','CN','CO','KM','CK','HR','CU','CW','CY','CZ','DK','DJ','DM','DO','EC','EE','SZ','ET','FO','FI','FR','GF','PF','GP','GE','DE','GR','GL','GD','GW','HT','HK','HU','IS','ID','IR','IT','JM','JO','KE','XK','KG','LA','LV','LI','LT','LU','MO','MG','MW','MY','MV','MT','MH','MU','YT','FM','MD','MC','ME','MZ','NP','NL','NC','NU','MK','NO','PW','PA','PL','PT','QA','RE','RO','RU','RW','WS','SM','RS','SC','SG','SK','SI','SO','KR','ES','LK','LC','MF','VC','SR','SE','CH','TJ','TZ','GM','TL','TT','TN','TR','TV','UA','AE','UZ','VA','ZM','ZW','BA'],
  allowedWith:['RS','HR','SE'],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'RS',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Serbia',   // Display name
  alpha2: 'RS',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['AL','AD','AG','AR','AM','AW','AT','AZ','BD','BB','BY','BE','BO','BQ','BA','BR','BG','BI','KH','CV','CL','CN','CO','KM','CK','CR','HR','CU','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','EE','SZ','ET','FO','FJ','FI','FR','GF','PF','GP','GE','DE','GR','GL','GD','GW','HT','HK','HU','IS','ID','IR','IL','IT','JM','JP','JO','KZ','KE','XK','KW','KG','LA','LV','LB','LI','LT','LU','MO','MG','MV','MT','MU','YT','FM','MD','MC','MN','ME','MZ','NP','NL','NC','NI','NU','MK','NO','OM','PW','PS','PA','PE','PL','PT','QA','RE','RO','RU','RW','WS','SM','SC','SG','SK','SI','SO','KR','ES','LK','KN','MF','VC','SR','SE','CH','TJ','TZ','TH','GM','TL','TT','TR','TV','UA','AE','UY','UZ','VU','VA','ZM','ZW','RS'],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'SE',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Sweden',   // Display name
  alpha2: 'SE',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['AL','AS','AD','AO','AI','AG','AR','AM','AW','AU','AT','BS','BH','BD','BB','BY','BE','BZ','BM','BO','BQ','BA','BW','BR','VG','BN','BG','BI','KH','CA','CV','KY','CL','CO','KM','CK','CR','HR','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','EE','SZ','ET','FK','FO','FJ','FI','FR','GF','PF','GP','GE','DE','GI','GR','GL','GD','GU','GT','GW','GY','HT','HN','HK','HU','IS','ID','IR','IQ','IE','IL','IT','JM','JP','JO','KZ','KE','KI','XK','KW','KG','LA','LV','LB','LS','LI','LT','LU','MO','MG','MW','MY','MV','MT','MH','MU','YT','MX','FM','MD','MC','MN','ME','MS','MA','MZ','MM','NA','NP','NL','NC','NZ','NI','NU','MK','MP','NO','OM','PW','PS','PA','PY','PE','PH','PL','PT','PR','QA','RE','RO','RW','WS','SM','ST','SA','SN','RS','SC','SL','SG','SK','SI','SB','SO','ZA','KR','ES','LK','SH','KN','LC','MF','VC','SR','CH','TW','TJ','TZ','TH','GM','TL','TO','TT','TN','TR','TC','TV','UA','AE','GB','US','UY','VI','UZ','VU','VA','VE','VN','ZM','ZW','SE'],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'IL',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Israel',   // Display name
  alpha2: 'IL',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['AL','AS','AD','AO','AI','AR','AM','AW','AT','AZ','BS','BB','BY','BE','BZ','BM','BQ','BA','BW','BR','BG','BI','KH','CA','CV','KY','CF','CL','CO','KM','CK','CR','HR','CW','CY','CZ','DK','DJ','DM','DO','EC','SV','EE','SZ','ET','FK','FO','FJ','FI','FR','GF','PF','GP','GE','DE','GI','GR','GL','GD','GU','GT','GW','HT','HN','HK','HU','IS','IE','IT','JM','JP','JO','KZ','KE','KI','XK','KG','LA','LV','LS','LI','LT','LU','MO','MG','MW','MT','MH','MU','YT','MX','FM','MD','MC','MN','ME','MS','MZ','MM','NA','NR','NP','NL','NC','NZ','NI','NU','MK','MP','NO','PW','PS','PA','PG','PY','PE','PH','PL','PT','PR','RE','RO','RU','RW','WS','SM','SN','RS','SC','SL','SG','SK','SI','SB','SO','ZA','KR','ES','LK','SH','KN','LC','MF','VC','SR','SE','CH','TW','TJ','TZ','TH','TL','TO','TT','TR','TC','TV','UA','AE','GB','US','UY','VI','UZ','VU','VA','ZM','ZW','IL'],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'SY',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Syria',   // Display name
  alpha2: 'SY',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['BI','KH','CV','KM','CK','DJ','DM','GW','IR','KE','LB','MO','MG','MY','MV','FM','MZ','NU','PW','RW','WS','SC','SO','SD','TL','TV','YE','SY'],
  incompatibleWith:['IL'],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'SS',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'South Sudan',   // Display name
  alpha2: 'SS',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['SS','BB','BJ','BO','BW','BI','KH','CV','KM','CK','DJ','DM','EG','ET','GH','GW','HT','IR','KE','LA','MO','MG','MY','MV','FM','MZ','NP','NU','PW','PS','RW','WS','SC','SG','SO','LK','KN','VC','SR','TZ','GM','TL','TV','UG'],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'SD',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Sudan',   // Display name
  alpha2: 'SD',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['SD','BD','BB','BJ','BI','KH','CV','KM','CK','DJ','DM','ER','GH','GW','HT','IR','KE','LA','LB','MO','MG','MY','MV','FM','MZ','NP','NU','PW','RW','WS','SC','SO','LK','KN','LC','VC','SR','SY','TZ','GM','TL','TV'],
  incompatibleWith:['IL','SS'],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'BS',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Bahamas',   // Display name
  alpha2: 'BS',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['BS','AL','AD','AO','AI','AG','AM','AW','AT','BD','BB','BE','BZ','BJ','BM','BO','BQ','BA','BW','BR','VG','BG','BI','KH','CA','CV','KY','CL','CN','CO','KM','CK','CR','HR','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','EE','SZ','FO','FJ','FI','FR','GF','PF','GP','GE','DE','GH','GI','GR','GL','GD','GT','GW','GY','HT','HN','HK','HU','IS','IR','IE','IL','IT','JM','JP','JO','KE','KI','XK','LA','LV','LB','LS','LI','LT','LU','MO','MG','MW','MY','MV','MT','MU','YT','MX','FM','MD','MC','ME','MS','MZ','NP','NL','NC','NI','NU','MK','NO','PW','PS','PA','PE','PH','PL','PT','QA','RE','RO','RW','WS','SM','SA','SN','RS','SC','SL','SG','SK','SI','SB','SO','ZA','KR','ES','LK','SH','KN','LC','MF','VC','SR','SE','CH','TJ','TZ','GM','TL','TO','TT','TR','TC','TV','UG','AE','GB','UY','UZ','VU','VA','ZM','ZW'],
  maxCitizenships: 1, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'BH',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Bahrain',   // Display name
  alpha2: 'BH',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['AM','AZ','BS','BD','BB','BY','BM','BO','BA','BW','BN','BI','KH','CV','KY','CN','KM','CK','DJ','DM','DO','EC','EG','SV','ET','GE','GT','GW','HT','HN','HK','ID','IR','JO','KZ','KE','XK','KW','KG','LA','LB','MO','MG','MW','MY','MV','MU','FM','ME','MA','MZ','NP','NZ','NI','NU','OM','PK','PW','PH','QA','RW','WS','SA','SN','RS','SC','SL','SG','SO','KR','LK','KN','VC','SR','SY','TJ','TZ','TH','TL','TN','TR','TV','UA','AE','GB','UZ','VU','YE','ZM','ZW','BH'],
  maxCitizenships: 1, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'BD',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Bangladesh',   // Display name
  alpha2: 'BD',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['BD','BS','BB','BT','BO','VG','BI','KH','CV','KM','CK','DJ','DM','FJ','GD','GW','HT','JM','KE','KI','MG','MV','FM','MS','MZ','NP','NU','RW','WS','SC','SL','SO','LK','KN','VC','GM','TL','TT','TV','VU'],
  allowedWith: [
    // 17 March 2008
    'GB', // United Kingdom
    // 23 September 2008
    'US','CA',
    'AL','AD','AM','AT','AZ','BY','BE','BA','BG','HR','CY','CZ','DK','EE','FI','FR','GE',
  'DE','GR','HU','IS','IE','IT','KZ','XK','LV','LI','LT','LU','MT','MD','MC','ME','NL',
  'MK','NO','PL','PT','RO','RU','SM','RS','SK','SI','ES','SE','CH','TR','UA','GB','VA',
    // 22 January 2012
    'BN','HK','JP','MY','SG','KR',
    // 27 February 2023
    'DZ','AR','BS','BB','BO','BW','BR','BI','CF','CL','CO','CG','CU','DM','DO','EC','EG',
    'ER','FJ','GM','GH','GD','GY','HT','JM','KE','LR','LY','MU','MA','PE','RW','LC','KN',
    'VC','SL','ZA','SD','SR','TT','TN','UY','VE'
  ],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
addCountry({
  code: 'BB',              // Unique code for the passport (use ISO alpha-2 or ISO alpha-3)
  name: 'Barbados',   // Display name
  alpha2: 'BB',            // ISO alpha-2 (used to auto-pull flag from /flags/us.png)
  visaFree:['AL','AD','AO','AI','AG','AR','AM','AW','AT','BS','BD','BY','BE','BZ','BM','BO','BQ','BA','BW','BR','VG','BG','BI','KH','CA','CV','KY','CL','CN','CO','KM','CK','CR','HR','CU','CW','CY','CZ','DK','DJ','DM','DO','EC','EG','SV','GQ','EE','SZ','FO','FJ','FI','FR','GF','PF','GP','GE','DE','GH','GI','GR','GL','GD','GT','GW','GY','HT','HN','HK','HU','IS','IR','IE','IL','IT','JM','JP','JO','KE','KI','XK','LA','LV','LB','LS','LI','LT','LU','MO','MG','MW','MY','MV','MT','MH','MU','YT','MX','FM','MD','MC','ME','MS','MZ','NP','NL','NC','NI','NU','MK','NO','PW','PS','PA','PE','PH','PL','PT','RE','RO','RW','WS','SM','SA','SN','RS','SC','SL','SG','SK','SI','SB','SO','ZA','KR','ES','LK','SH','KN','LC','MF','VC','SR','SE','CH','TZ','GM','TL','TO','TT','TN','TR','TC','TV','UG','AE','GB','UY','UZ','VU','VA','VE','ZM','ZW','BB'],
  maxCitizenships: Infinity, // Change to 1 for no dual, 2 for no triple, etc.
});
    finalizeCountries();

    /* ===================== DOM & LOGIC ===================== */
    document.addEventListener('DOMContentLoaded', () => {
      const grid = document.getElementById('grid');
      const listEl = document.getElementById('country-list');
      const searchEl = document.getElementById('search');

      const notesEl = document.getElementById('notes-content');
      const summaryEl = document.getElementById('summary');
      const selectedEl = document.getElementById('selected');
      const destEl = document.getElementById('destinations');

      const selected = new Set();

      function renderCountryList() {
  const listEl = document.getElementById("country-list");
  listEl.innerHTML = "";

  // Sort by display name (change to .code if you want ISO2 order instead)
  const sorted = [...ORDER].sort((a, b) => {
    const nameA = PASSPORTS.get(a).name.toLowerCase();
    const nameB = PASSPORTS.get(b).name.toLowerCase();
    return nameA.localeCompare(nameB);
  });

  sorted.forEach(code => {
    const p = PASSPORTS.get(code);
    const li = document.createElement("li");
    li.setAttribute("data-name", p.name.toLowerCase());
    li.setAttribute("data-code", p.code);

    const label = document.createElement("label");
    label.className = "country-button";
    label.tabIndex = 0;

    if (p.flag) {
      const img = document.createElement("img");
      img.className = "flag";
      img.src = p.flag;
      img.alt = `${p.name} flag`;
      label.appendChild(img);
    }

    const input = document.createElement("input");
    input.type = "checkbox";
    input.value = p.code;
    input.addEventListener("change", onToggle);

    label.appendChild(input);
    label.append(p.name);

    li.appendChild(label);
    listEl.appendChild(li);
  });
}

      function onToggle(e) {
        const code = e.target.value;
        if (e.target.checked) selected.add(code);
        else selected.delete(code);
        recompute();
      }

      function currentMaxAllowedCount(withCandidate = null) {
        let minCap = Infinity;
        for (const c of selected) minCap = Math.min(minCap, PASSPORTS.get(c).maxCitizenships);
        if (withCandidate) minCap = Math.min(minCap, PASSPORTS.get(withCandidate).maxCitizenships);
        return minCap;
      }

      function isCompatibleToAdd(code) {
        const cand = PASSPORTS.get(code);
        if (!cand) return false;

        const minCap = currentMaxAllowedCount(code);
        if ((selected.size + 1) > minCap) return false;

        // If nothing selected, allow any first passport
        if (selected.size === 0) return true;

        for (const s of selected) {
          const sel = PASSPORTS.get(s);

          // Hard incompatibility
          if (sel.incompatibleWith.has(cand.code) || cand.incompatibleWith.has(sel.code)) {
            return false;
          }

          // Allowed-with restrictions
          if (sel.allowedWith.size > 0 && !sel.allowedWith.has(cand.code)) {
            return false;
          }
          if (cand.allowedWith.size > 0 && !cand.allowedWith.has(sel.code)) {
            return false;
          }
        }
        return true;
      }

      function explainDisabledReasons() {
  const lines = [];
  const cap = currentMaxAllowedCount();
  if (cap !== Infinity) {
    const capping = Array.from(selected)
      .filter(c => PASSPORTS.get(c).maxCitizenships === cap)
      .map(c => PASSPORTS.get(c).name);
    lines.push(
      cap === 1
        ? `Citizenship cap: ${capping.join(', ')} allows only one citizenship (no dual).`
        : `Citizenship cap: ${capping.join(', ')} limits total citizenships to ${cap}.`
    );
  }
  for (const s of selected) {
    const sel = PASSPORTS.get(s);

    if (sel.incompatibleWith.size) {
      const names = Array.from(sel.incompatibleWith)
        .filter(c => PASSPORTS.has(c))
        .map(c => PASSPORTS.get(c).name);
      if (names.length) {
        lines.push(`${sel.name} is incompatible with: ${names.join(', ')}.`);
      }
    }

    // NEW: generic note for allowedWith cases
    if (sel.allowedWith && sel.allowedWith.size) {
      const allowedNames = Array.from(sel.allowedWith)
        .filter(c => PASSPORTS.has(c))
        .map(c => PASSPORTS.get(c).name);
      lines.push(`${sel.name} permits dual nationality only with: ${allowedNames.join(', ')}.`);
    }

    if (sel.notes) {
      lines.push(`${sel.name}: ${sel.notes}`);
    }
  }
  notesEl.innerHTML = lines.length
    ? `<ul>${lines.map(l => `<li>${l}</li>`).join('')}</ul>`
    : `<span class="muted">No active restrictions. Select passports to see notes.</span>`;
}

      function updateCheckboxStates() {
        const items = listEl.querySelectorAll('li');
        const minCap = currentMaxAllowedCount();

        items.forEach(li => {
          const code = li.getAttribute('data-code');
          const label = li.querySelector('label');
          const input = li.querySelector('input');
          const alreadySelected = selected.has(code);

          let disable = false;
          if (!alreadySelected) {
            if (selected.size > 0) {
              if (selected.size >= minCap) disable = true;
              else if (!isCompatibleToAdd(code)) disable = true;
            }
            if (!disable) {
              for (const s of selected) {
                const sel = PASSPORTS.get(s);
                if (sel.incompatibleWith.has(code) || PASSPORTS.get(code).incompatibleWith.has(s)) { disable = true; break; }
              }
            }
          }
          input.disabled = disable;
          label.classList.toggle('disabled', disable && !alreadySelected);
        });
      }

      /* REPLACE: union of destination CODES (strings) */
function computeDestinationsUnion() {
  const union = new Set();
  selected.forEach(code => {
    const p = PASSPORTS.get(code);
    if (p) p.visaFree.forEach(destCode => union.add(destCode));
  });
  return Array.from(union).sort((a,b)=>a.localeCompare(b));
}

/* ADD: helper to display a destination code nicely */
function nameFor(code) {
  const up = (code || '').toUpperCase();
  // Prefer known passports' names; fall back to registry; else show code
  return PASSPORTS.get(up)?.name || CODE_TO_NAME[up] || up;
}
      function renderResults() {
  const chosen = Array.from(selected).map(c => PASSPORTS.get(c).name).sort((a,b)=>a.localeCompare(b));
  selectedEl.innerHTML = chosen.length
    ? `Selected: ${chosen.map(n => `<span class="pill">${n}</span>`).join(' ')}`
    : `<span class="muted">No passports selected.</span>`;

  const unionCodes = computeDestinationsUnion();
  summaryEl.innerHTML = `<b>${unionCodes.length}</b> countries available.`;

  destEl.innerHTML = unionCodes.length
    ? unionCodes.map(code => `<li>${nameFor(code)}</li>`).join('')
    : `<li class="muted">Destinations will appear here.</li>`;
}

      function recompute() {
        updateCheckboxStates();
        explainDisabledReasons();
        renderResults();
      }

      function applySearchFilter() {
        const filter = (searchEl.value || '').toLowerCase().trim();
        Array.from(listEl.querySelectorAll('li')).forEach(li => {
          const text = li.getAttribute('data-name') || '';
          li.style.display = text.includes(filter) ? '' : 'none';
        });
      }

      // Initial render & wire-up
      renderCountryList();
      applySearchFilter();
      recompute();
      searchEl.addEventListener('input', applySearchFilter);

      /* ===== Draggable dividers ===== */
      function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }

      const dragX = document.getElementById('drag-bar-x');
      dragX.addEventListener('mousedown', e => {
        e.preventDefault();
        function onMove(ev){
          const rect = grid.getBoundingClientRect();
          const x = ev.clientX - rect.left;
          const min = 220, max = Math.min(720, rect.width - 320);
          grid.style.gridTemplateColumns = clamp(x, min, max) + 'px 5px 1fr';
        }
        function onUp(){ document.removeEventListener('mousemove', onMove); document.removeEventListener('mouseup', onUp); }
        document.addEventListener('mousemove', onMove);
        document.addEventListener('mouseup', onUp);
      });

      const dragY = document.getElementById('drag-bar-y');
      dragY.addEventListener('mousedown', e => {
        e.preventDefault();
        function onMove(ev){
          const rect = grid.getBoundingClientRect();
          const y = ev.clientY - rect.top;
          const minTop = 120, minBottom = 160, total = rect.height;
          grid.style.gridTemplateRows = clamp(y, minTop, total - minBottom) + 'px 5px 1fr';
        }
        function onUp(){ document.removeEventListener('mousemove', onMove); document.removeEventListener('mouseup', onUp); }
        document.addEventListener('mousemove', onMove);
        document.addEventListener('mouseup', onUp);
      });
    });
  })();
  </script>
</body>
</html>